<!-- <!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" />
  <title>‚è∞ Voice Alarm </title>
  <link rel="manifest" href="manifest.json">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    :root {
      --primary-color: #007bff;
      --secondary-color: #212529;
      --success-color: #28a745;
      --danger-color: #dc3545;
    }

    body {
      background-color: #f0f2f5;
      padding: 1rem;
      font-family: "Arial", sans-serif;
      min-height: 100vh;
      display: flex;
      align-items: center
    }

    .clock {
      font-size: 2rem;
      font-weight: bold;
      text-align: center;
      background: var(--secondary-color);
      color: #fff;
      border-radius: 15px;
      padding: 12px;
      box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.2);
      transition: all 0.3s ease;
      margin: 0 auto;
      max-width: 100%;
    }

    @media (min-width: 400px) {
      .clock {
        font-size: 2.5rem;
        padding: 15px;
      }
    }

    @media (min-width: 576px) {
      .clock {
        font-size: 3rem;
        padding: 20px;
        border-radius: 20px;
      }
    }

    @media (min-width: 768px) {
      .clock {
        font-size: 3.5rem;
      }
    }

    .ringing {
      animation: shake 0.5s infinite;
    }

    @keyframes shake {
      0% {
        transform: rotate(0deg);
      }

      25% {
        transform: rotate(-10deg);
      }

      50% {
        transform: rotate(10deg);
      }

      75% {
        transform: rotate(-10deg);
      }

      100% {
        transform: rotate(0deg);
      }
    }

    .bell-icon {
      width: 30px;
      height: auto;
      margin-right: 8px;
      transition: all 0.3s ease;
    }

    @media (min-width: 400px) {
      .bell-icon {
        width: 35px;
      }
    }

    @media (min-width: 576px) {
      .bell-icon {
        width: 50px;
      }
    }

    .btn-custom {
      background-color: var(--success-color);
      color: white;
      font-weight: bold;
      transition: all 0.3s ease;
      padding: 10px 15px;
      border-radius: 8px;
      font-size: 16px;
    }

    .btn-custom:hover {
      background-color: #218838;
      transform: translateY(-2px);
    }

    .btn-danger-custom {
      background-color: var(--danger-color);
      color: white;
      font-weight: bold;
      transition: all 0.3s ease;
      padding: 10px 15px;
      border-radius: 8px;
      font-size: 16px;
    }

    .btn-danger-custom:hover {
      background-color: #c82333;
      transform: translateY(-2px);
    }

    .form-select,
    .form-control {
      background-color: #f8f9fa;
      border: 1px solid #ced4da;
      padding: 10px 12px;
      border-radius: 8px;
      transition: all 0.3s ease;
      font-size: 16px;
    }

    .form-control:focus,
    .form-select:focus {
      border-color: var(--primary-color);
      box-shadow: 0 0 0 0.25rem rgba(0, 123, 255, 0.25);
    }

    .container {
      width: 100%;
      max-width: 800px;
      margin: 0 auto;
      padding: 15px;
      background: white;
      border-radius: 15px;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    @media (min-width: 576px) {
      .container {
        padding: 20px;
        border-radius: 20px;
      }
    }

    .alarm-status {
      font-size: 0.9rem;
      color: var(--primary-color);
      min-height: 20px;
      transition: all 0.3s ease;
      word-break: break-word;
    }

    @media (min-width: 400px) {
      .alarm-status {
        font-size: 1rem;
        min-height: 24px;
      }
    }

    @media (min-width: 576px) {
      .alarm-status {
        font-size: 1.2rem;
      }
    }

    .title-text {
      font-size: 1.5rem;
      color: var(--primary-color);
      text-align: center;
      margin-bottom: 1rem;
      transition: all 0.3s ease;
    }

    @media (min-width: 400px) {
      .title-text {
        font-size: 1.8rem;
      }
    }

    @media (min-width: 576px) {
      .title-text {
        font-size: 2.2rem;
      }
    }

    .icon-container {
      display: flex;
      justify-content: center;
      align-items: center;
      margin-bottom: 1rem;
      flex-wrap: wrap;
    }

    /* Touch-friendly improvements */
    select,
    input,
    button {
      -webkit-appearance: none;
      appearance: none;
      font-size: 16px;
      /* Prevents iOS zoom on focus */
    }

    /* Improved spacing */
    .mb-4 {
      margin-bottom: 1.5rem !important;
    }

    .mt-4 {
      margin-top: 1.5rem !important;
    }

    /* Dark mode support */
    @media (prefers-color-scheme: dark) {
      body {
        background-color: #121212;
      }

      .container {
        background-color: #1e1e1e;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.5);
      }

      .form-select,
      .form-control {
        background-color: #2d2d2d;
        color: #e0e0e0;
        border-color: #444;
      }

      .title-text {
        color: #4d9fff;
      }

      .alarm-status {
        color: #4d9fff;
      }
    }

    /* Extra small devices specific styles */
    @media (max-width: 400px) {

      .col-md-4,
      .col-md-8 {
        padding-left: 5px;
        padding-right: 5px;
      }

      .btn-custom,
      .btn-danger-custom {
        padding: 8px 12px;
      }
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="icon-container">
      <img src="https://cdn-icons-png.flaticon.com/512/130/130276.png" id="bellIcon" class="bell-icon d-none"
        alt="Ringing Bell" />
      <h1 class="title-text">‚è∞ Voice Alarm Clock</h1>
    </div>

    <div class="clock mb-4" id="clock">--:--:--</div>

    <form id="alarmForm" class="row g-3">
      <div class="col-md-4 col-12">
        <label for="alarmTime" class="form-label">Alarm Time</label>
        <input type="time" id="alarmTime" class="form-control" required />
      </div>
      <div class="col-md-8 col-12">
        <label for="alarmMsg" class="form-label">Alarm Message</label>
        <input type="text" id="alarmMsg" class="form-control" placeholder="Enter message (Urdu / Punjabi / English)"
          required />
      </div>
      <div class="col-12 mb-3">
        <label for="voiceSelect" class="form-label">Select Voice</label>
        <select id="voiceSelect" class="form-select" required>
          <option value="">Select Voice</option>
        </select>
      </div>
      <div class="col-12">
        <button type="submit" class="btn btn-custom w-100">Set Alarm</button>
      </div>
    </form>

    <div class="text-center mt-4">
      <div id="alarmStatus" class="alarm-status mb-2"></div>
      <button id="stopBtn" class="btn btn-danger-custom d-none">
        Stop Alarm
      </button>
    </div>

    <audio id="alarmAudio" loop>
      <source src="https://www.soundjay.com/button/beep-07.wav" type="audio/wav" />
    </audio>
  </div>

  <script>
    const clock = document.getElementById("clock");
    const alarmForm = document.getElementById("alarmForm");
    const alarmTimeInput = document.getElementById("alarmTime");
    const alarmMsgInput = document.getElementById("alarmMsg");
    const alarmStatus = document.getElementById("alarmStatus");
    const alarmAudio = document.getElementById("alarmAudio");
    const bellIcon = document.getElementById("bellIcon");
    const voiceSelect = document.getElementById("voiceSelect");
    const stopBtn = document.getElementById("stopBtn");

    let alarmTime = null;
    let alarmMessage = "";
    let selectedVoice = null;
    let alarmInterval = null;

    function updateClock() {
      const now = new Date();
      clock.textContent = now.toLocaleTimeString();
      const current = now.toTimeString().slice(0, 5);
      if (alarmTime === current) {
        triggerAlarm();
      }
      requestAnimationFrame(updateClock);
    }

    function populateVoices() {
      const voices = speechSynthesis.getVoices();
      voiceSelect.innerHTML = '<option value="">Select Voice</option>';

      // Group voices by language with special handling for Punjabi
      const grouped = {};

      voices.forEach((voice, index) => {
        // Normalize language codes (handle both 'pa' and 'pa-IN')
        const langParts = voice.lang.toLowerCase().split("-");
        const baseLang = langParts[0];

        // Special case for Punjabi
        const displayLang =
          baseLang === "pa" ? "Punjabi" : baseLang.toUpperCase();

        if (!grouped[displayLang]) grouped[displayLang] = [];
        grouped[displayLang].push({ voice, index });
      });

      // Sort languages alphabetically but put Punjabi first if it exists
      const sortedLangs = Object.keys(grouped).sort((a, b) => {
        if (a === "Punjabi") return -1;
        if (b === "Punjabi") return 1;
        return a.localeCompare(b);
      });

      sortedLangs.forEach((lang) => {
        const optgroup = document.createElement("optgroup");
        optgroup.label = lang;

        // Sort voices within each language group
        grouped[lang].sort((a, b) =>
          a.voice.name.localeCompare(b.voice.name)
        );

        grouped[lang].forEach(({ voice, index }) => {
          const option = document.createElement("option");
          option.value = index;
          option.text = `${voice.name} (${voice.lang})`;
          optgroup.appendChild(option);
        });

        voiceSelect.appendChild(optgroup);
      });

      // Auto-select Punjabi voice if available
      if (grouped["Punjabi"] && grouped["Punjabi"].length > 0) {
        const punjabiVoice = grouped["Punjabi"][0];
        voiceSelect.value = punjabiVoice.index;
      }
    }

    // Voice preview
    voiceSelect.addEventListener("change", () => {
      const selectedIndex = voiceSelect.value;
      if (!selectedIndex) return;

      const previewVoice = speechSynthesis.getVoices()[selectedIndex];

      if (previewVoice) {
        let previewText = "This is a voice preview.";
        if (previewVoice.lang.startsWith("pa")) {
          previewText = "‡®á‡®π ‡®á‡©±‡®ï ‡®µ‡©å‡®á‡®∏ ‡®™‡®∞‡®ø‡®µ‡©á‡®ñ‡®£ ‡®π‡©à‡•§"; // Punjabi preview text
        } else if (previewVoice.lang.startsWith("ur")) {
          previewText = "€å€Å ÿß€å⁄© ÿ¢Ÿàÿßÿ≤ ⁄©ÿß Ÿæ€åÿ¥ ŸÜÿ∏ÿßÿ±€Å €Å€í€î"; // Urdu preview text
        }

        const utterance = new SpeechSynthesisUtterance(previewText);
        utterance.voice = previewVoice;
        utterance.lang = previewVoice.lang;
        speechSynthesis.cancel();
        speechSynthesis.speak(utterance);
      }
    });

    // Handle voice changes on Chrome
    speechSynthesis.onvoiceschanged = populateVoices;

    alarmForm.addEventListener("submit", (e) => {
      e.preventDefault();
      alarmTime = alarmTimeInput.value;
      alarmMessage = alarmMsgInput.value;
      const selectedIndex = voiceSelect.value;

      if (!selectedIndex) {
        alarmStatus.textContent = "‚ö†Ô∏è Please select a voice";
        alarmStatus.style.color = "var(--danger-color)";
        return;
      }

      selectedVoice = speechSynthesis.getVoices()[selectedIndex];
      alarmStatus.textContent = `‚è≥ Alarm set for ${alarmTime} - "${alarmMessage}"`;
      alarmStatus.style.color = "var(--primary-color)";

      // Visual feedback
      const submitBtn = e.target.querySelector('button[type="submit"]');
      submitBtn.innerHTML = "‚úÖ Alarm Set!";
      setTimeout(() => {
        submitBtn.innerHTML = "Set Alarm";
      }, 2000);
    });

    function triggerAlarm() {
      alarmStatus.textContent = `üîî Alarm ringing: "${alarmMessage}"`;
      bellIcon.classList.remove("d-none");
      bellIcon.classList.add("ringing");
      alarmAudio.play();
      stopBtn.classList.remove("d-none");

      // Vibration for mobile devices if supported
      if (navigator.vibrate) {
        navigator.vibrate([300, 100, 300, 100, 300]);
      }

      speakMessage();
      alarmInterval = setInterval(speakMessage, 10000);
    }

    function speakMessage() {
      if (!selectedVoice) return;

      const msg = new SpeechSynthesisUtterance();
      msg.text = alarmMessage;
      msg.voice = selectedVoice;
      msg.lang = selectedVoice.lang;
      msg.pitch = 1;
      msg.rate = 0.9; // Slightly slower for better comprehension

      // Special handling for Punjabi/Urdu messages
      if (
        selectedVoice.lang.startsWith("pa") ||
        selectedVoice.lang.startsWith("ur")
      ) {
        msg.rate = 0.85; // Even slower for complex scripts
      }

      speechSynthesis.speak(msg);
    }

    stopBtn.addEventListener("click", stopAlarm);

    function stopAlarm() {
      alarmAudio.pause();
      alarmAudio.currentTime = 0;
      speechSynthesis.cancel();
      clearInterval(alarmInterval);
      bellIcon.classList.add("d-none");
      bellIcon.classList.remove("ringing");
      stopBtn.classList.add("d-none");
      alarmTime = null;
      alarmMessage = "";
      selectedVoice = null;
      alarmStatus.textContent = "‚úÖ Alarm stopped.";
      alarmStatus.style.color = "var(--success-color)";

      // Reset form for better UX
      alarmForm.reset();

      // Reset time to current time + 1 minute
      const now = new Date();
      now.setMinutes(now.getMinutes() + 1);
      const hours = String(now.getHours()).padStart(2, "0");
      const mins = String(now.getMinutes()).padStart(2, "0");
      alarmTimeInput.value = `${hours}:${mins}`;
    }

    // Check for browser support
    document.addEventListener("DOMContentLoaded", function () {
      if (!("speechSynthesis" in window)) {
        alarmStatus.textContent =
          "‚ö†Ô∏è Speech synthesis not supported in this browser.";
        alarmStatus.style.color = "var(--danger-color)";
        voiceSelect.disabled = true;
      }

      // Initial voice population
      populateVoices();

      // Some browsers need a delay before voices are ready
      setTimeout(populateVoices, 500);
    });

    // Initialize the clock
    updateClock();

    // Set default time to current time + 1 minute for better UX
    const now = new Date();
    now.setMinutes(now.getMinutes() + 1);
    const hours = String(now.getHours()).padStart(2, "0");
    const mins = String(now.getMinutes()).padStart(2, "0");
    alarmTimeInput.value = `${hours}:${mins}`;
  </script>
</body>

</html> -->

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Multi-Voice Alarm Clock</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary-color: #4361ee;
      --secondary-color: #3f37c9;
      --accent-color: #4895ef;
      --light-color: #f8f9fa;
      --dark-color: #212529;
      --success-color: #4cc9f0;
      --warning-color: #f72585;
      --clock-size: 300px;
      --transition: all 0.3s ease;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #1a2a6c, #b21f1f, #1a2a6c);
      color: var(--light-color);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
      transition: var(--transition);
    }

    .container {
      max-width: 1000px;
      width: 100%;
      background: rgba(25, 25, 60, 0.85);
      backdrop-filter: blur(10px);
      border-radius: 20px;
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
      overflow: hidden;
      padding: 30px;
      position: relative;
    }

    header {
      text-align: center;
      margin-bottom: 30px;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 15px;
    }

    h1 {
      font-size: 2.5rem;
      font-weight: 700;
      background: linear-gradient(to right, #ff7e5f, #feb47b);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      display: inline-block;
    }

    .clock-container {
      display: flex;
      justify-content: center;
      margin-bottom: 40px;
    }

    .clock {
      width: var(--clock-size);
      height: var(--clock-size);
      border-radius: 50%;
      background: linear-gradient(145deg, #1e1e40, #2a2a5a);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4),
        inset 0 0 20px rgba(0, 0, 0, 0.3);
      display: flex;
      justify-content: center;
      align-items: center;
      position: relative;
      border: 8px solid var(--primary-color);
      transition: var(--transition);
    }

    .clock-face {
      width: 92%;
      height: 92%;
      border-radius: 50%;
      background: #0f1020;
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;
    }

    .time {
      font-size: 3.5rem;
      font-weight: 700;
      letter-spacing: 3px;
      text-shadow: 0 0 15px var(--accent-color);
      z-index: 10;
    }

    .alarm-icon {
      position: absolute;
      top: 20px;
      right: 20px;
      font-size: 1.8rem;
      color: var(--warning-color);
      opacity: 0;
      transform: scale(0);
      transition: var(--transition);
    }

    .alarm-icon.active {
      opacity: 1;
      transform: scale(1);
      animation: pulse 1.5s infinite;
    }

    .alarm-form {
      background: rgba(40, 40, 80, 0.7);
      border-radius: 15px;
      padding: 25px;
      margin-bottom: 30px;
    }

    .form-title {
      text-align: center;
      margin-bottom: 25px;
      font-size: 1.8rem;
      color: var(--success-color);
    }

    .form-group {
      margin-bottom: 20px;
    }

    label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: #e0e0ff;
    }

    input,
    select,
    textarea {
      width: 100%;
      padding: 12px 15px;
      border-radius: 10px;
      border: none;
      background: rgba(30, 30, 60, 0.8);
      color: var(--light-color);
      font-size: 1rem;
      border: 2px solid transparent;
      transition: var(--transition);
    }

    input:focus,
    select:focus,
    textarea:focus {
      outline: none;
      border-color: var(--accent-color);
      box-shadow: 0 0 10px rgba(67, 97, 238, 0.5);
    }

    .language-tabs {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
    }

    .language-tab {
      flex: 1;
      padding: 10px;
      text-align: center;
      background: rgba(30, 30, 60, 0.8);
      border-radius: 8px;
      cursor: pointer;
      transition: var(--transition);
    }

    .language-tab.active {
      background: var(--primary-color);
      font-weight: 600;
    }

    .voice-preview {
      margin-top: 15px;
      padding: 15px;
      background: rgba(30, 30, 60, 0.8);
      border-radius: 10px;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .voice-preview button {
      background: var(--accent-color);
      color: white;
      border: none;
      padding: 8px 15px;
      border-radius: 8px;
      cursor: pointer;
      transition: var(--transition);
    }

    .voice-preview button:hover {
      background: var(--secondary-color);
    }

    .controls {
      display: flex;
      justify-content: center;
      gap: 20px;
    }

    button {
      padding: 14px 30px;
      border: none;
      border-radius: 12px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .set-btn {
      background: linear-gradient(to right, #4361ee, #3a0ca3);
      color: white;
      box-shadow: 0 5px 15px rgba(67, 97, 238, 0.4);
    }

    .set-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(67, 97, 238, 0.6);
    }

    .stop-btn {
      background: linear-gradient(to right, #f72585, #b5179e);
      color: white;
      box-shadow: 0 5px 15px rgba(247, 37, 133, 0.4);
      display: none;
    }

    .stop-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 8px 20px rgba(247, 37, 133, 0.6);
    }

    .theme-toggle {
      position: absolute;
      top: 20px;
      right: 20px;
      background: rgba(40, 40, 80, 0.7);
      width: 60px;
      height: 30px;
      border-radius: 15px;
      cursor: pointer;
      display: flex;
      align-items: center;
      padding: 0 5px;
    }

    .toggle-circle {
      width: 22px;
      height: 22px;
      background: var(--accent-color);
      border-radius: 50%;
      transition: transform 0.3s ease;
    }

    footer {
      text-align: center;
      margin-top: 30px;
      color: rgba(255, 255, 255, 0.7);
      font-size: 0.9rem;
    }

    /* Animations */
    @keyframes pulse {
      0% {
        transform: scale(1);
      }

      50% {
        transform: scale(1.2);
      }

      100% {
        transform: scale(1);
      }
    }

    @keyframes ring {
      0% {
        transform: rotate(0deg);
      }

      25% {
        transform: rotate(5deg);
      }

      50% {
        transform: rotate(0deg);
      }

      75% {
        transform: rotate(-5deg);
      }

      100% {
        transform: rotate(0deg);
      }
    }

    .ringing {
      animation: ring 0.3s infinite;
      box-shadow: 0 0 30px var(--warning-color);
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      :root {
        --clock-size: 220px;
      }

      h1 {
        font-size: 2rem;
      }

      .time {
        font-size: 2.5rem;
      }

      .alarm-form {
        padding: 20px;
      }

      button {
        padding: 12px 25px;
        font-size: 1rem;
      }
    }

    @media (max-width: 480px) {
      :root {
        --clock-size: 180px;
      }

      .container {
        padding: 20px 15px;
      }

      h1 {
        font-size: 1.7rem;
      }

      .time {
        font-size: 2rem;
      }

      .form-title {
        font-size: 1.5rem;
      }

      .controls {
        flex-direction: column;
        gap: 15px;
      }

      button {
        width: 100%;
        justify-content: center;
      }
    }

    /* Dark Mode */
    body.dark-mode {
      background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
    }

    body.dark-mode .container {
      background: rgba(15, 15, 35, 0.9);
    }

    body.dark-mode .alarm-form {
      background: rgba(25, 25, 50, 0.7);
    }

    body.dark-mode input,
    body.dark-mode select,
    body.dark-mode textarea,
    body.dark-mode .language-tab,
    body.dark-mode .voice-preview {
      background: rgba(20, 20, 45, 0.8);
    }

    .dark-mode .toggle-circle {
      transform: translateX(30px);
    }
  </style>
</head>

<body>
  <div class="container">
    <div class="theme-toggle" id="themeToggle">
      <div class="toggle-circle"></div>
    </div>

    <header>
      <h1>Voice Alarm Clock</h1>
      <i class="fas fa-bell alarm-icon"></i>
    </header>

    <div class="clock-container">
      <div class="clock" id="clock">
        <div class="clock-face">
          <div class="time" id="time">00:00:00</div>
        </div>
      </div>
    </div>

    <div class="alarm-form">
      <h2 class="form-title">Set Your Alarm</h2>

      <div class="form-group">
        <label for="alarmTime">Alarm Time</label>
        <input type="time" id="alarmTime" required>
      </div>

      <div class="form-group">
        <label>Alarm Message</label>
        <div class="language-tabs">
          <div class="language-tab active" data-lang="en">English</div>
          <div class="language-tab" data-lang="ur">Urdu</div>
          <div class="language-tab" data-lang="pa">Pashto</div>
        </div>
        <textarea id="alarmMessage" rows="3" placeholder="Wake up! It's time to start your day..."></textarea>
      </div>

      <div class="form-group">
        <label for="voiceSelect">Select Voice</label>
        <select id="voiceSelect">
          <option value="">Loading voices...</option>
        </select>

        <div class="voice-preview">
          <input type="text" id="previewText" placeholder="Type text to preview voice"
            value="Hello, this is your alarm">
          <button id="previewBtn"><i class="fas fa-play"></i> Preview</button>
        </div>
      </div>
    </div>

    <div class="controls">
      <button class="set-btn" id="setAlarm">
        <i class="fas fa-alarm-clock"></i> Set Alarm
      </button>
      <button class="stop-btn" id="stopAlarm">
        <i class="fas fa-stop"></i> Stop Alarm
      </button>
    </div>

    <footer>
      <p>¬© 2025 Multi-Voice Alarm Clock | Supports English, Urdu, and Punjabi</p>
    </footer>
  </div>

  <audio id="alarmSound" loop>
    <source src="https://assets.mixkit.co/sfx/preview/mixkit-alarm-digital-clock-beep-989.mp3" type="audio/mpeg">
  </audio>

  <script>
    // DOM Elements
    const timeElement = document.getElementById('time');
    const clockElement = document.getElementById('clock');
    const alarmIcon = document.querySelector('.alarm-icon');
    const alarmTimeInput = document.getElementById('alarmTime');
    const alarmMessageInput = document.getElementById('alarmMessage');
    const voiceSelect = document.getElementById('voiceSelect');
    const setAlarmBtn = document.getElementById('setAlarm');
    const stopAlarmBtn = document.getElementById('stopAlarm');
    const themeToggle = document.getElementById('themeToggle');
    const alarmSound = document.getElementById('alarmSound');
    const previewBtn = document.getElementById('previewBtn');
    const previewText = document.getElementById('previewText');
    const languageTabs = document.querySelectorAll('.language-tab');

    // Alarm state
    let alarmSet = false;
    let alarmTime = null;
    let selectedVoice = null;
    let speechInterval = null;

    // Update clock function
    function updateClock() {
      const now = new Date();
      const hours = String(now.getHours()).padStart(2, '0');
      const minutes = String(now.getMinutes()).padStart(2, '0');
      const seconds = String(now.getSeconds()).padStart(2, '0');

      timeElement.textContent = `${hours}:${minutes}:${seconds}`;

      // Check if alarm should trigger
      if (alarmSet) {
        const currentTime = `${hours}:${minutes}`;
        if (currentTime === alarmTime) {
          triggerAlarm();
        }
      }
    }

    // Trigger alarm function
    function triggerAlarm() {
      // Visual effects
      clockElement.classList.add('ringing');
      alarmIcon.classList.add('active');

      // Show stop button
      setAlarmBtn.style.display = 'none';
      stopAlarmBtn.style.display = 'flex';

      // Play alarm sound
      alarmSound.play();

      // Speak the alarm message
      speakMessage();

      // Set interval to repeat the message every 10 seconds
      speechInterval = setInterval(speakMessage, 1000);

      // Alarm has been triggered
      alarmSet = false;
    }

    // Speak message function
    function speakMessage() {
      const message = alarmMessageInput.value;
      if (!message) return;

      const speech = new SpeechSynthesisUtterance(message);

      // Set voice if selected
      if (selectedVoice) {
        speech.voice = selectedVoice;
      }

      // Set language based on active tab
      const activeLang = document.querySelector('.language-tab.active').dataset.lang;
      if (activeLang === 'ur') {
        speech.lang = 'ur-PK';
      } else if (activeLang === 'pa') {
        speech.lang = 'pa-IN';
      } else {
        speech.lang = 'en-US';
      }

      window.speechSynthesis.speak(speech);
    }

    // Stop alarm function
    function stopAlarm() {
      // Remove visual effects
      clockElement.classList.remove('ringing');
      alarmIcon.classList.remove('active');

      // Show set button
      setAlarmBtn.style.display = 'flex';
      stopAlarmBtn.style.display = 'none';

      // Stop alarm sound
      alarmSound.pause();
      alarmSound.currentTime = 0;

      // Stop speech
      window.speechSynthesis.cancel();
      if (speechInterval) {
        clearInterval(speechInterval);
        speechInterval = null;
      }
    }

    // Function to select voice based on language
    function selectVoiceForLanguage(lang) {
      const voices = window.speechSynthesis.getVoices();
      let targetVoice = null;

      if (lang === 'ur') {
        // Find Urdu voice
        targetVoice = voices.find(voice =>
          voice.lang.includes('ur') ||
          voice.lang.includes('hi') ||
          voice.name.toLowerCase().includes('urdu')
        );
      } else if (lang === 'pa') {
        // Find Punjabi voice
        targetVoice = voices.find(voice =>
          voice.lang.includes('pa') ||
          voice.lang.includes('punjabi') ||
          voice.name.toLowerCase().includes('punjabi')
        );
      } else {
        // Find English voice
        targetVoice = voices.find(voice =>
          voice.lang.includes('en')
        );
      }

      // If specific language voice found, select it
      if (targetVoice) {
        voiceSelect.value = targetVoice.name;
        selectedVoice = targetVoice;
      } else {
        // Fallback to first available voice
        if (voices.length > 0) {
          voiceSelect.value = voices[0].name;
          selectedVoice = voices[0];
        }
      }
    }

    // Populate voices function
    function populateVoices() {
      // Get available voices
      const voices = window.speechSynthesis.getVoices();

      // Clear existing options
      voiceSelect.innerHTML = '';

      // Add voices to select (removed default indicator)
      voices.forEach(voice => {
        const option = document.createElement('option');
        option.value = voice.name;
        option.textContent = `${voice.name} (${voice.lang})`;
        voiceSelect.appendChild(option);
      });

      // Set default voice based on current language
      const activeLang = document.querySelector('.language-tab.active').dataset.lang;
      selectVoiceForLanguage(activeLang);
    }

    // Initialize the app
    function init() {
      // Update clock immediately and every two second
      updateClock();
      setInterval(updateClock, 1000);

      // Populate voices when they become available
      if (speechSynthesis.onvoiceschanged !== undefined) {
        speechSynthesis.onvoiceschanged = populateVoices;
      }

      // Set alarm button event
      setAlarmBtn.addEventListener('click', () => {
        // if (!alarmTimeInput.value) {
        //   alert('Please set the alarm time');
        //   return;
        // }

        alarmTime = alarmTimeInput.value;
        alarmSet = true;

        // Show confirmation
        const [alarmHours, alarmMinutes] = alarmTime.split(':');
        // alert(`Alarm set for ${alarmHours}:${alarmMinutes}`);
      });

      // Stop alarm button event
      stopAlarmBtn.addEventListener('click', stopAlarm);

      // Voice selection event
      voiceSelect.addEventListener('change', () => {
        const voices = window.speechSynthesis.getVoices();
        const selectedVoiceName = voiceSelect.value;
        selectedVoice = voices.find(voice => voice.name === selectedVoiceName);
      });

      // Theme toggle event
      themeToggle.addEventListener('click', () => {
        document.body.classList.toggle('dark-mode');

        // Save preference to localStorage
        const isDarkMode = document.body.classList.contains('dark-mode');
        localStorage.setItem('darkMode', isDarkMode);
      });

      // Preview voice button
      previewBtn.addEventListener('click', () => {
        if (!previewText.value) return;

        // Create temporary speech
        const speech = new SpeechSynthesisUtterance(previewText.value);

        // Use selected voice if available
        if (selectedVoice) {
          speech.voice = selectedVoice;
        }

        window.speechSynthesis.speak(speech);
      });

      // Language tabs
      languageTabs.forEach(tab => {
        tab.addEventListener('click', () => {
          // Remove active class from all tabs
          languageTabs.forEach(t => t.classList.remove('active'));

          // Add active class to clicked tab
          tab.classList.add('active');

          // Update placeholder based on language
          const lang = tab.dataset.lang;
          if (lang === 'en') {
            alarmMessageInput.placeholder = "Wake up! It's time to start your day...";
          } else if (lang === 'ur') {
            alarmMessageInput.placeholder = "ÿ¨ÿß⁄ØŸà! ÿßÿ® ÿ™ŸÖ€Åÿß ÿØŸÜŸàŸÜ€í ⁄©ÿß ŸàŸÇÿ™ ÿ¢ ⁄Ø€åÿß €Å€í...";
          } else if (lang === 'pa') {
            alarmMessageInput.placeholder = "ŸàŸä⁄ö ÿ¥Ÿá! ÿßŸàÿ≥ ÿØ Ÿàÿ±⁄Å€ê ŸæŸäŸÑ€êÿØŸà ŸàÿÆÿ™ ÿØ€å..";
          }

          // Auto-select appropriate voice for the language
          selectVoiceForLanguage(lang);
        });
      });

      // Check for saved theme preference
      if (localStorage.getItem('darkMode') === 'true') {
        document.body.classList.add('dark-mode');
      }
    }

    // Initialize when page loads
    window.addEventListener('DOMContentLoaded', init);
  </script>
</body>

</html>